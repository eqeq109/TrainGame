fileFormatVersion: 2
guid: f6b0c07a775c49a44b2bc96d16ac7df4
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ZEPETO_Character_Controller_1
    = require(\"ZEPETO.Character.Controller\");\r\nconst EasingFunctions_1 = require(\"./EasingFunctions\");\r\nclass
    Tail extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n       
    super(...arguments);\r\n        this.isFirst = false;\r\n        this.isLast
    = false;\r\n        this.fullTime = 1;\r\n        this.partTime = 0.5;\r\n   
    }\r\n    Start() {\r\n    }\r\n    Init(id, first, event) {\r\n        //console.log(''init'');\r\n       
    this.triggerEvent = event;\r\n        this.isLast = false;\r\n        this.ownerId
    = id;\r\n        this.headModel.SetActive(first);\r\n        this.tailModel.SetActive(!first);\r\n   
    }\r\n    *HitAnimation() {\r\n        let playTime = 0;\r\n        let partProcessTime
    = 0;\r\n        const model = this.isFirst ? this.headModel : this.tailModel;\r\n       
    const material = model.GetComponent($typeof(UnityEngine_1.Renderer)).sharedMaterial;\r\n       
    while (true) {\r\n            yield new UnityEngine_1.WaitForEndOfFrame();\r\n           
    playTime += UnityEngine_1.Time.deltaTime;\r\n            if (partProcessTime
    <= this.partTime) {\r\n                partProcessTime += UnityEngine_1.Time.deltaTime;\r\n               
    material.SetFloat(''_Alpha'', EasingFunctions_1.easing.inCirc2(0.1, 1, partProcessTime
    / this.partTime));\r\n            }\r\n            else if (partProcessTime <=
    1) {\r\n                partProcessTime += UnityEngine_1.Time.deltaTime;\r\n               
    material.SetFloat(''_Alpha'', EasingFunctions_1.easing.inCirc2(1, 0.1, (partProcessTime
    - 0.25) / this.partTime));\r\n            }\r\n            else {\r\n               
    partProcessTime = 0;\r\n            }\r\n            if (playTime > this.fullTime)
    {\r\n                material.SetFloat(''_Alpha'', 1);\r\n                break;\r\n           
    }\r\n        }\r\n        yield null;\r\n    }\r\n    SetLast(last) {\r\n       
    this.isLast = last;\r\n    }\r\n    PlayHitAnimation() {\r\n        if (!this.hitedRoutine)
    {\r\n            this.StopCoroutine(this.hitedRoutine);\r\n        }\r\n       
    this.hitedRoutine = this.StartCoroutine(this.HitAnimation());\r\n    }\r\n   
    // OnCollisionEnter(coll: Collision){\r\n    //     if(!this.ownerId){\r\n   
    //         return;\r\n    //     }\r\n    //     if(!coll.gameObject.GetComponent<ZepetoCharacter>()){\r\n   
    //         //console.log(`not have zepetocharacter ${coll.gameObject.name}.`);\r\n   
    //         return;\r\n    //     }\r\n    //     if (!this.isLast) {\r\n    //        
    return;\r\n    //     }\r\n    //     if (this.triggerEvent != null) {\r\n   
    //         this.triggerEvent(this.ownerId);\r\n    //         //this.triggerEvent.Invoke(this.ownerId);\r\n   
    //     }\r\n    // }\r\n    OnTriggerEnter(coll) {\r\n        if (!this.ownerId)
    {\r\n            return;\r\n        }\r\n        if (!coll.gameObject.GetComponent($typeof(ZEPETO_Character_Controller_1.ZepetoCharacter)))
    {\r\n            //console.log(`not have zepetocharacter ${coll.gameObject.name}.`);\r\n           
    return;\r\n        }\r\n        if (!this.isLast) {\r\n            return;\r\n       
    }\r\n        if (this.triggerEvent != null) {\r\n            this.triggerEvent(this.ownerId);\r\n           
    //this.triggerEvent.Invoke(this.ownerId);\r\n        }\r\n    }\r\n}\r\nexports.default
    = Tail;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlRhaWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpREFBcUQ7QUFFckQsNkNBQStJO0FBQy9JLDZFQUE4RDtBQUU5RCx1REFBMkM7QUFFM0MsTUFBcUIsSUFBSyxTQUFRLHFDQUFxQjtJQUF2RDs7UUFDVyxZQUFPLEdBQVksS0FBSyxDQUFDO1FBR3pCLFdBQU0sR0FBWSxLQUFLLENBQUM7UUFtQnZCLGFBQVEsR0FBVSxDQUFDLENBQUM7UUFDcEIsYUFBUSxHQUFVLEdBQUcsQ0FBQztJQTBFbEMsQ0FBQztJQXpGRyxLQUFLO0lBRUwsQ0FBQztJQUVNLElBQUksQ0FBQyxFQUFVLEVBQUUsS0FBYyxFQUFFLEtBQXVCO1FBQzNELHNCQUFzQjtRQUN0QixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUMxQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXJDLENBQUM7SUFJTyxDQUFFLFlBQVk7UUFDbEIsSUFBSSxRQUFRLEdBQVUsQ0FBQyxDQUFDO1FBQ3hCLElBQUksZUFBZSxHQUFVLENBQUMsQ0FBQztRQUMvQixNQUFNLEtBQUssR0FBZSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3pFLE1BQU0sUUFBUSxHQUFhLEtBQUssQ0FBQyxZQUFZLFNBQUMsc0JBQVEsR0FBSSxjQUFjLENBQUM7UUFDekUsT0FBTSxJQUFJLEVBQUM7WUFDUCxNQUFNLElBQUksK0JBQWlCLEVBQUUsQ0FBQztZQUM5QixRQUFRLElBQUksa0JBQUksQ0FBQyxTQUFTLENBQUM7WUFFM0IsSUFBRyxlQUFlLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBQztnQkFDaEMsZUFBZSxJQUFJLGtCQUFJLENBQUMsU0FBUyxDQUFDO2dCQUVsQyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSx3QkFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLGVBQWUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQzthQUN4RjtpQkFDSSxJQUFJLGVBQWUsSUFBSSxDQUFDLEVBQUM7Z0JBQzFCLGVBQWUsSUFBSSxrQkFBSSxDQUFDLFNBQVMsQ0FBQztnQkFFbEMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsd0JBQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQzthQUNqRztpQkFBSTtnQkFDRCxlQUFlLEdBQUcsQ0FBQyxDQUFDO2FBQ3ZCO1lBQ0QsSUFBRyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBQztnQkFDeEIsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLE1BQU07YUFDVDtTQUNKO1FBQ0QsTUFBTSxJQUFJLENBQUM7SUFDZixDQUFDO0lBRU0sT0FBTyxDQUFDLElBQWE7UUFDeEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDdkIsQ0FBQztJQUNNLGdCQUFnQjtRQUNuQixJQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBQztZQUNsQixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUN6QztRQUNELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQscUNBQXFDO0lBQ3JDLHlCQUF5QjtJQUN6QixrQkFBa0I7SUFDbEIsUUFBUTtJQUNSLDREQUE0RDtJQUM1RCw4RUFBOEU7SUFDOUUsa0JBQWtCO0lBQ2xCLFFBQVE7SUFDUiwwQkFBMEI7SUFDMUIsa0JBQWtCO0lBQ2xCLFFBQVE7SUFDUix1Q0FBdUM7SUFDdkMsMkNBQTJDO0lBQzNDLG9EQUFvRDtJQUNwRCxRQUFRO0lBQ1IsSUFBSTtJQUVKLGNBQWMsQ0FBQyxJQUFjO1FBQ3pCLElBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFDO1lBQ2IsT0FBTztTQUNWO1FBQ0QsSUFBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxTQUFDLDZDQUFlLEVBQUcsRUFBQztZQUNoRCxtRUFBbUU7WUFDbkUsT0FBTztTQUNWO1FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZCxPQUFPO1NBQ1Y7UUFDRCxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxFQUFFO1lBQzNCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2hDLHlDQUF5QztTQUM1QztJQUNMLENBQUM7Q0FFSjtBQWxHRCx1QkFrR0MifQ==","assetPath":"Assets/ZepetoScripts/Tail.ts","manifest":{"properties":[{"assembly":"mscorlib","name":"isFirst","type":"System.Boolean","isArray":false,"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"ownerId","type":"System.String","isArray":false,"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"","name":"triggerEvent","type":"__type","isArray":false,"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"isLast","type":"System.Boolean","isArray":false,"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"headModel","type":"UnityEngine.GameObject","isArray":false,"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"tailModel","type":"UnityEngine.GameObject","isArray":false,"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"hitedRoutine","type":"UnityEngine.Coroutine","isArray":false,"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"Tail","description":""},"isCompiled":true}'
  typescriptHash: b144d7baccf17bcbb300acb3121dcb37
